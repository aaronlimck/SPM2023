datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Access_Type{
  id Int @id
  type String @db.VarChar(50)

  Staffs Staff[]
}

model Staff {
  Staff_ID    Int    @id
  Staff_FName String @db.VarChar(50)
  Staff_LName String @db.VarChar(50)
  Dept        String @db.VarChar(50)
  Email       String @db.VarChar(50)
  Access_Rights    Int

  Access_Type  Access_Type @relation(fields: [Access_Rights], references: [id])

  // Define a one-to-many relationship with Staff_Skill
  Staff_Skills Staff_Skill[]
}

model Role {
  Role_Name  String     @db.VarChar(50) @id
  Role_Desc  String
  Role_ExpiryDate DateTime  
  createdDate DateTime
  updatedDate DateTime
  roleSkills Role_Skill[] // Add a reference to Role_Skill
}

model Role_Skill {
  Role_Name  String     @db.VarChar(50)
  Skill_Name String     @db.VarChar(50) @id

  Role       Role       @relation(fields: [Role_Name], references: [Role_Name])

  // Define a one-to-many relationship with Staff_Skill
  Staff_Skills Staff_Skill[]
}

model Staff_Skill {
  Staff_ID Int 
  Skill_Name String @db.VarChar(50)
  @@id([Staff_ID, Skill_Name])

  // Define a many-to-one relationship with Staff
  Staff Staff @relation(fields: [Staff_ID], references: [Staff_ID])

  // Define a many-to-one relationship with Role_Skill
  RoleSkill Role_Skill @relation(fields: [Skill_Name], references: [Skill_Name])
}

